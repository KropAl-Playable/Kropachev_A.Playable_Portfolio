:root{
  --bg:#0b0b0f; --text:#e6e6e6; --muted:#9aa1ad; --card:#11131a; --primary:#2563eb; --primary-fg:#fff;
  --border:#1f2230; --shadow:0 10px 24px rgba(0,0,0,.4); --radius:14px; --tap:44px; --min-card:190px;
}
@media (prefers-color-scheme: light){
  :root{ --bg:#fff; --text:#111; --muted:#6b7280; --card:#f7f7f9; --border:#e5e7eb; --shadow:0 6px 20px rgba(0,0,0,.08); }
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; font:15px/1.5 system-ui,-apple-system,Segoe UI,Roboto,sans-serif; background:var(--bg); color:var(--text)}
img,video{max-width:100%; display:block}
.visually-hidden{position:absolute!important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px)}

.site-header,.site-footer{display:flex; justify-content:space-between; align-items:center; gap:12px; padding:12px 16px; border-bottom:1px solid var(--border); position:relative; z-index:30}
.site-footer{border-top:1px solid var(--border); border-bottom:none}
.brand{font-weight:700; text-decoration:none; color:var(--text)}
.top-nav a, .btn.ghost{ text-decoration:none; padding:8px 12px; border-radius:10px; }
.view-toggle.is-active{ background:var(--card); }
.btn{min-height:var(--tap); padding:10px 14px; border-radius:12px; border:1px solid var(--border); background:var(--card); color:var(--text); text-decoration:none; display:inline-flex; align-items:center; gap:8px; box-shadow:var(--shadow); cursor:pointer; font-size:0.95rem}
.btn.primary{background:var(--primary); color:var(--primary-fg); border-color:transparent}
.btn.icon{width:var(--tap); height:var(--tap); display:inline-grid; place-items:center}
.input,.select{
  min-height:var(--tap);
  padding:10px 36px 10px 12px;
  border-radius:12px; border:1px solid var(--border); background:var(--bg); color:var(--text);
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  box-shadow:var(--shadow);
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24'%3E%3Cpath fill='%23bbb' d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
  background-repeat:no-repeat; background-position:right 10px center; background-size:14px;
}
.toggle{display:inline-flex; align-items:center; gap:8px}
.hero{padding:18px 16px; display:grid; gap:8px}
.tagline{color:var(--muted); font-size:0.95rem}
.cta-row{display:flex; align-items:center; gap:12px; flex-wrap:wrap}

.controls{padding:12px 16px; border-block:1px solid var(--border); background:linear-gradient(180deg, rgba(255,255,255,.02), transparent); position:relative; z-index:25}
.filters-rows{display:grid; grid-template-columns:1fr 1fr; gap:12px; align-items:end}
.filters-rows .row{display:grid; gap:6px}
.filters-rows .grow{grid-column:1/-1}
@media (min-width: 880px){ .filters-rows{grid-template-columns:repeat(5, minmax(0,1fr))} }

/* резервируем место под фикс-панель контактов */
main{ padding-bottom: 88px; }

/* Сетка */
.gallery{ display:grid; grid-template-columns: repeat(auto-fit, minmax(var(--min-card), 1fr)); gap: 10px; padding:14px }
.gallery.masonry{ column-count:auto; column-width: var(--min-card); column-gap:10px }
.gallery.masonry .card{ break-inside: avoid; margin-bottom:10px }

/* Карточка */
.card{ background:var(--card); border:1px solid var(--border); border-radius: var(--radius); overflow:hidden; box-shadow: var(--shadow); display:flex; flex-direction:column; container-type:inline-size; cursor:pointer }
.card__media{ position:relative; aspect-ratio: 9/16; background:#0e0f13 }
.card__media img{ width:100%; height:100%; object-fit:cover }
.card__body{ padding:10px; display:grid; gap:6px }
.card__title{ margin:0; font-size: clamp(13px, 2.2cqi, 16px) }
.card__tags{ display:flex; gap:6px; flex-wrap:wrap }
.tag{ font-size:12px; padding:3px 7px; border-radius:999px; background:rgba(255,255,255,.06) }
@media (prefers-color-scheme: light){ .tag{ background:rgba(0,0,0,.05) } }
.card__desc{ color:var(--muted); font-size:13px }
.card__actions{ display:flex; gap:8px; margin-top:4px; flex-wrap:wrap }

/* Lightbox */
.lightbox[aria-hidden="true"]{ display:none }
.lightbox{ position:fixed; inset:0; z-index:50 }
.lightbox__backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.6) }
.lightbox__dialog{ position:relative; z-index:1; max-width:min(1000px,96vw); max-height:92vh; margin:4vh auto; background:var(--bg); border-radius:20px; overflow:hidden; display:grid; grid-template-rows:auto 1fr auto; border:1px solid var(--border); box-shadow:var(--shadow) }
.lightbox__header,.lightbox__footer{ padding:10px; display:flex; align-items:center; justify-content:space-between; gap:8px }
.lightbox__actions{ display:flex; gap:8px; align-items:center }
.lightbox__body{ padding:10px; display:grid; gap:10px }

/* Phone frame */
.phone-frame{ --w:414; --h:896; position:relative; margin:0 auto; background:#000; border-radius:38px; border:8px solid #111; width:min(88vw,420px); aspect-ratio: var(--w)/var(--h); box-shadow:0 20px 60px rgba(0,0,0,.35); overflow:hidden }
.phone-frame.landscape{ aspect-ratio: var(--h)/var(--w) }
.phone-frame .notch{ position:absolute; top:0; left:50%; transform:translateX(-50%); width:210px; height:28px; background:#000; border-bottom-left-radius:16px; border-bottom-right-radius:16px; z-index:2 }
#playableFrame{ position:absolute; inset:0; width:100%; height:100%; border:0; background:#000; z-index:1 }

.desc{ color:var(--muted) }

/* Контактная панель — всегда видна */
.contact-bar{
  position:fixed; left:0; right:0; bottom:0; z-index:60;
  display:flex; gap:8px; justify-content:center; padding:10px 12px;
  background: color-mix(in oklab, var(--bg) 92%, transparent);
  border-top:1px solid var(--border); backdrop-filter: blur(6px);
}

:focus-visible{ outline:3px solid var(--primary); outline-offset:2px }
@media (prefers-reduced-motion: no-preference){
  .card{ transition: transform .18s ease }
  .card:where(:hover,:focus-within){ transform: translateY(-1px) }
}
